
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Đăng nhập - Đặt vé xem phim</title>
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/as-alert-message.min.css}">
	<link rel="stylesheet" type="text/css"
		  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/style-starter.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/sign-in.css}">
	<style>
		.error {
			color: #e74c3c;
			font-size: 0.95em;
			margin-top: 2px;
			display: block;
		}
		
		.alert {
			padding: 12px 16px;
			margin: 10px 0;
			border-radius: 8px;
			font-size: 0.95em;
			font-weight: 500;
			width: 100%;
			box-sizing: border-box;
			position: relative;
			animation: slideIn 0.3s ease-in-out;
		}
		
		.alert-success {
			background-color: #d4edda;
			border: 1px solid #c3e6cb;
			color: #155724;
		}
		
		.alert-danger {
			background-color: #f8d7da;
			border: 1px solid #f5c6cb;
			color: #721c24;
		}
		
		@keyframes slideIn {
			from {
				opacity: 0;
				transform: translateY(-10px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
		.admin-link {
			position: fixed;
			top: 20px;
			right: 20px;
			z-index: 1000;
		}

		.admin-link a {
			background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
			color: white;
			padding: 10px 20px;
			border-radius: 25px;
			text-decoration: none;
			font-weight: 500;
			box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
			transition: all 0.3s ease;
		}

		.admin-link a:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(79, 70, 229, 0.4);
			color: white;
		}

		.admin-link i {
			margin-right: 8px;
		}
		.container_signup_signin {
			max-width: 700px;
			margin: 40px auto;
			box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
			border-radius: 18px;
			background: #fff;
			display: flex;
			flex-direction: row;
			min-height: 660px;
		}
		.form-container {
			flex: 1;
			/*padding: 40px 32px 32px 32px;*/
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}
		.form-container form {
			width: 100%;
			max-width: 370px;
		}
		.form-container input[type="text"],
		.form-container input[type="email"],
		.form-container input[type="password"],
		.form-container input[type="tel"],
		.form-container input[type="date"] {
			width: 100%;
			padding: 8px 14px;
			margin: 7px 0 2px 0;
			border: 1px solid #ddd;
			border-radius: 8px;
			font-size: 1rem;
			box-sizing: border-box;
			transition: border 0.2s;
			height: 38px;
		}
		.form-container input[type="text"]:focus,
		.form-container input[type="email"]:focus,
		.form-container input[type="password"]:focus,
		.form-container input[type="tel"]:focus,
		.form-container input[type="date"]:focus {
			border: 1.5px solid #4f46e5;
		}
		.form-container button {
			margin-top: 18px;
			width: 100%;
			padding: 10px 0;
			font-size: 1.1rem;
			border-radius: 8px;
		}
		@media (max-width: 900px) {
			.container_signup_signin {
				flex-direction: column;
				max-width: 98vw;
				min-height: unset;
			}
			.form-container {
				padding: 24px 10px;
			}
		}
	</style>
</head>

<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="container_signup_signin" id="container_signup_signin">
	<!-- Register Form -->
	<div class="form-container sign-up-container">
		<form th:action="@{/register}" th:object="${user}" method="post">
			<h1>Tạo tài khoản</h1>
			<span>Đăng ký tài khoản để đặt vé xem phim</span>

			<!-- Hiển thị thông báo lỗi -->
			<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

			<!-- Form fields - cần điều chỉnh theo UserRegistrationDto -->
			<input th:field="*{userName}" type="text" placeholder="Tên đăng nhập" required />
			<span th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}" class="error"></span>

			<input th:field="*{email}" type="email" placeholder="Email" required />
			<span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error"></span>

			<input th:field="*{dateOfBirth}" type="date" placeholder="Ngày sinh" />
			<span th:if="${#fields.hasErrors('dateOfBirth')}" th:errors="*{dateOfBirth}" class="error"></span>
			<input th:field="*{phone}" type="tel" placeholder="Số điện thoại" required />
			<span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="error"></span>
			<input th:field="*{address}" type="text" placeholder="Địa chỉ" required />
			<span th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="error"></span>
			<input th:field="*{password}" type="password" placeholder="Mật khẩu" required />
			<span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error"></span>
			<input th:field="*{confirmPassword}" type="password" placeholder="Xác nhận mật khẩu" required />
			<span th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}" class="error"></span>

			<button type="submit">Đăng ký</button>
		</form>
	</div>

	<!-- Login Form -->
	<div class="form-container sign-in-container">
		<form th:action="@{/login}" method="post" style="color: var(--theme-title);">
			<h1>Đăng nhập</h1>
			<span>Đăng nhập để đặt vé xem phim</span>

			<div class="social-container">
<!--				<a href="#" class="social" style="color: var(&#45;&#45;theme-title);"><i class="fab fa-facebook-f"></i></a>-->
				<a href="/oauth2/authorization/google" class="social" style="color: var(--theme-title);"><i class="fab fa-google-plus-g"></i></a>
<!--				<a href="#" class="social" style="color: var(&#45;&#45;theme-title);"><i class="fab fa-linkedin-in"></i></a>-->
			</div>
			<span>hoặc sử dụng tài khoản của bạn</span>

			<!-- Hiển thị thông báo lỗi và thành công -->
			<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
			<div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
			<div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

			<!-- Spring Security sử dụng email và password mặc định -->
			<input name="email" type="text" placeholder="Email" required />
			<input name="password" type="password" placeholder="Mật khẩu" required />


			<a href="/forgot-password">Quên mật khẩu?</a>

			<button type="submit">Đăng nhập</button>
		</form>
	</div>

	<div class="overlay-container">
		<div class="overlay">
			<div class="overlay-panel overlay-left">
				<h1>Chào mừng trở lại!</h1>
				<p>Đăng nhập để tiếp tục đặt vé xem phim</p>
				<button class="ghost" id="signIn">Đăng nhập</button>
			</div>
			<div class="overlay-panel overlay-right">
				<h1>Xin chào, bạn!</h1>
				<p>Đăng ký tài khoản và đặt vé xem phim ngay hôm nay!</p>
				<button class="ghost" id="signUp">Đăng ký</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript" th:src="@{/assets/js/as-alert-message.min.js}"></script>
<script th:src="@{/assets/js/jquery-3.3.1.min.js}"></script>
<!--/theme-change-->
<script th:src="@{/assets/js/theme-change.js}"></script>
<!-- disable body scroll which navbar is in active -->
<script>
	$(function () {
		$('.navbar-toggler').click(function () {
			$('body').toggleClass('noscroll');
		})
	});
</script>
<!-- disable body scroll which navbar is in active -->
<!--/MENU-JS-->
<script>
	$(window).on("scroll", function () {
		var scroll = $(window).scrollTop();

		if (scroll >= 80) {
			$("#site-header").addClass("nav-fixed");
		} else {
			$("#site-header").removeClass("nav-fixed");
		}
	});

	//Main navigation Active Class Add Remove
	$(".navbar-toggler").on("click", function () {
		$("header").toggleClass("active");
	});
	$(document).on("ready", function () {
		if ($(window).width() > 991) {
			$("header").removeClass("active");
		}
		$(window).on("resize", function () {
			if ($(window).width() > 991) {
				$("header").removeClass("active");
			}
		});
	});
</script>
<script th:src="@{/assets/js/bootstrap.min.js}"></script>

<script type="text/javascript" th:src="@{/assets/js/sign-in.js}"></script>


</body>

</html>
